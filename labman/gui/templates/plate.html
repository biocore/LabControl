{% extends sitebase.html %}
{% block head %}

<link rel="stylesheet" href="/static/vendor/css/slick-default-theme.css" type="text/css"/>
<link rel="stylesheet" href="/static/vendor/css/slick.grid.css" type="text/css"/>
<link rel="stylesheet" href="/static/vendor/css/jquery-ui.min.css" type="text/css"/>

<script src="/static/vendor/js/jquery.event.drag-2.3.0.js" type="text/javascript"></script>
<script src="/static/vendor/js/slick.core.js" type="text/javascript"></script>
<script src="/static/vendor/js/slick.grid.js" type="text/javascript"></script>
<script src="/static/vendor/js/slick.editors.js" type="text/javascript"></script>
<script src="/static/vendor/js/jquery-ui.min.js" type="text/javascript"></script>

<script src="/static/js/plate.js"></script>
<script src="/static/js/plateViewer.js"></script>
<script type='text/javascript'>

  $(document).ready(function(){
    var plateId = {% if plate_id %} {{plate_id}} {% else %} undefined {% end %};
    var processId = {% if process_id %} {{process_id}} {% else %} undefined {% end %};
    add_plate_html(plateId);
    add_plate_html_functions(processId, plateId);

  });

</script>

{% end %}
{%block content %}

<!-- Plate configuration div -->
<div class='form-group' hidden>
  <label class='control-label'><h4>Plate configuration:</h4></label>
  <select id='plate-conf-select' class='form-control plate-conf-select'>
    <option selected disabled>Choose plate configuration...</option>
    {% for id, name, rows, cols in plate_confs %}
      <option value='{{id}}' pm-data-rows='{{rows}}' pm-data-cols='{{cols}}'>{{name}}</option>
    {% end %}
  </select>
</div>


<!-- Modal to update the plate name -->
<div class='modal fade' tabindex='-1' role='dialog' id='updatePlateName' data-keyboard="false" data-backdrop="static">
  <div class='modal-dialog modal-md'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button id='updatePlateNameCloseBtn' type='button' class='close' data-dismiss='modal' aria-hidden='true' hidden>&times;</button>
        <h3>Plate name</h3>
      </div>
      <div class='modal-body'>
        <div id='newNameDiv' class='form-group has-error has-feedback'>
          <label for='newNameInput'>New name:</label>
          <input type='text' class='form-control' id='newNameInput'>
          <span class='glyphicon glyphicon-remove form-control-feedback'></span>
        </div>
      </div>
      <div class='modal-footer'>
        <a id='cancelUpdateNameBtn' class='btn btn-default' href='/'>Cancel</a>
        <button id='updateNameBtn' class='btn btn-default' onclick='change_plate_name();' disabled><span></span> Update</button>
      </div>
    </div>
  </div>
</div>


<div id='work_area'>
</div>

<!-- Modal to add a study -->
<div class='modal fade' tabindex='-1' role='dialog' id='addStudyModal'>
  <div class='modal-dialog modal-lg'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>
        <h3>Add study to plate</h3>
      </div>
      <div class='modal-body'>
        <table id="searchStudyTable" class="display" cellspacing="0" width="100%">
          <thead>
            <tr>
              <th>Study id</th>
              <th>Study title</th>
              <th>Study alias</th>
              <th>Study owner</th>
              <th>Num samples</th>
              <th>Add</th>
            </tr>
          </thead>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Modal to make a comment on a well -->
<div class='modal fade' tabindex='-1' role='dialog' id='addWellComment'>
  <div class='modal-dialog modal-lg'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>
        <h3>Add comment to well</h3>
      </div>
      <div class='modal-body'>
        <textarea id='wellTextArea' rows="10" cols="75"></textarea>
      </div>
      <div class='modal-footer'>
        <button class='btn btn-danger' data-dismiss='modal' aria-hidden='true'>Cancel</button>
        <button id='addWellCommentBtn' class='btn btn-default'><span></span> Comment</button>
      </div>
    </div>
  </div>
</div>


{% end %}
